<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Alternating methods · FrankWolfe.jl</title><meta name="title" content="Alternating methods · FrankWolfe.jl"/><meta property="og:title" content="Alternating methods · FrankWolfe.jl"/><meta property="twitter:title" content="Alternating methods · FrankWolfe.jl"/><meta name="description" content="Documentation for FrankWolfe.jl."/><meta property="og:description" content="Documentation for FrankWolfe.jl."/><meta property="twitter:description" content="Documentation for FrankWolfe.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">FrankWolfe.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../basics/">How does it work?</a></li><li><a class="tocitem" href="../../advanced/">Advanced features</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../docs_00_fw_visualized/">Visualization of Frank-Wolfe running on a 2-dimensional polytope</a></li><li><a class="tocitem" href="../docs_01_mathopt_lmo/">Comparison with MathOptInterface on a Probability Simplex</a></li><li><a class="tocitem" href="../docs_02_polynomial_regression/">Polynomial Regression</a></li><li><a class="tocitem" href="../docs_03_matrix_completion/">Matrix Completion</a></li><li><a class="tocitem" href="../docs_04_rational_opt/">Exact Optimization with Rational Arithmetic</a></li><li><a class="tocitem" href="../docs_05_blended_cg/">Blended Conditional Gradients</a></li><li><a class="tocitem" href="../docs_06_spectrahedron/">Spectrahedron</a></li><li><a class="tocitem" href="../docs_07_shifted_norm_polytopes/">FrankWolfe for scaled, shifted <span>$\ell^1$</span> and <span>$\ell^{\infty}$</span> norm balls</a></li><li><a class="tocitem" href="../docs_08_callback_and_tracking/">Tracking, counters and custom callbacks for Frank Wolfe</a></li><li><a class="tocitem" href="../docs_09_extra_vertex_storage/">Extra-lazification</a></li><li class="is-active"><a class="tocitem" href>Alternating methods</a><ul class="internal"><li><a class="tocitem" href="#Setting-up-objective,-gradient-and-linear-minimization-oracles"><span>Setting up objective, gradient and linear minimization oracles</span></a></li><li><a class="tocitem" href="#Running-Alternating-Linear-Minimization"><span>Running Alternating Linear Minimization</span></a></li><li><a class="tocitem" href="#Running-Alternating-Projections"><span>Running Alternating Projections</span></a></li><li><a class="tocitem" href="#Plotting-the-resulting-trajectories"><span>Plotting the resulting trajectories</span></a></li></ul></li><li><a class="tocitem" href="../docs_11_block_coordinate_fw/">Block-Coordinate Frank-Wolfe and Block-Vectors</a></li><li><a class="tocitem" href="../docs_12_quadratic_symmetric/">Accelerations for quadratic functions and symmetric problems</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/0_reference/">API Reference</a></li><li><a class="tocitem" href="../../reference/1_algorithms/">Algorithms</a></li><li><a class="tocitem" href="../../reference/2_lmo/">Linear Minimization Oracles</a></li><li><a class="tocitem" href="../../reference/3_backend/">Utilities and data structures</a></li><li><a class="tocitem" href="../../reference/4_linesearch/">Line search and step size settings</a></li><li><a class="tocitem" href="../../reference/5_gradient_descent/">Adaptive Proximal Gradient Descent Methods</a></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Alternating methods</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Alternating methods</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ZIB-IOL/FrankWolfe.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ZIB-IOL/FrankWolfe.jl/blob/master/examples/docs_10_alternating_methods.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><pre class="documenter-example-output"><code class="nohighlight hljs ansi">plot_sparsity (generic function with 1 method)</code></pre><h1 id="Alternating-methods"><a class="docs-heading-anchor" href="#Alternating-methods">Alternating methods</a><a id="Alternating-methods-1"></a><a class="docs-heading-anchor-permalink" href="#Alternating-methods" title="Permalink"></a></h1><p>In this example we will compare <a href="../../reference/1_algorithms/#FrankWolfe.alternating_linear_minimization-Union{Tuple{LS}, Tuple{N}, Tuple{Any, Any, Any, Tuple{Vararg{FrankWolfe.LinearMinimizationOracle, N}}, Tuple{Vararg{Any, N}}}} where {N, LS&lt;:Union{Tuple{Vararg{FrankWolfe.LineSearchMethod, N}}, FrankWolfe.LineSearchMethod}}"><code>FrankWolfe.alternating_linear_minimization</code></a> and <a href="../../reference/1_algorithms/#FrankWolfe.alternating_projections-Union{Tuple{N}, Tuple{Tuple{Vararg{FrankWolfe.LinearMinimizationOracle, N}}, Any}} where N"><code>FrankWolfe.alternating_projections</code></a> for a very simple feasibility problem.</p><p>We consider the probability simplex</p><p class="math-container">\[P = \{ x \in \mathbb{R}^n \colon \sum_{i=1}^n x_i = 1, x_i \geq 0 ~~ i=1,\dots,n\} ~.\]</p><p>and a scaled, shifted <span>$\ell^{\infty}$</span> norm ball</p><p class="math-container">\[Q = [-1,0]^n ~.\]</p><p>The goal is to find a point that lies both in <span>$P$</span> and <span>$Q$</span>. We do this by reformulating the problem first. Instead of a finding a point in the intersection <span>$P \cap Q$</span>, we search for a pair of points, <span>$(x_P, x_Q)$</span> in the cartesian product <span>$P \times Q$</span>, which attains minimal distance between <span>$P$</span> and <span>$Q$</span>,</p><p class="math-container">\[\|x_P - x_Q\|_2 = \min_{(x,y) \in P \times Q} \|x - y \|_2 ~.\]</p><pre><code class="language-julia hljs">using FrankWolfe
include(&quot;../examples/plot_utils.jl&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">plot_sparsity (generic function with 1 method)</code></pre><h2 id="Setting-up-objective,-gradient-and-linear-minimization-oracles"><a class="docs-heading-anchor" href="#Setting-up-objective,-gradient-and-linear-minimization-oracles">Setting up objective, gradient and linear minimization oracles</a><a id="Setting-up-objective,-gradient-and-linear-minimization-oracles-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-objective,-gradient-and-linear-minimization-oracles" title="Permalink"></a></h2><p>Alternating Linear Minimization (ALM) allows for an additional objective such that one can optimize over an intersection of sets instead of finding only feasible points. Since this example only considers the feasibility, we set the objective function as well as the gradient to zero.</p><pre><code class="language-julia hljs">n = 20

f(x) = 0

function grad!(storage, x)
    @. storage = zero(x)
end


lmo1 = FrankWolfe.ProbabilitySimplexOracle(1.0)
lmo2 = FrankWolfe.ScaledBoundLInfNormBall(-ones(n), zeros(n))
lmos = (lmo1, lmo2)

x0 = rand(n)

target_tolerance = 1e-6

trajectories = [];</code></pre><h2 id="Running-Alternating-Linear-Minimization"><a class="docs-heading-anchor" href="#Running-Alternating-Linear-Minimization">Running Alternating Linear Minimization</a><a id="Running-Alternating-Linear-Minimization-1"></a><a class="docs-heading-anchor-permalink" href="#Running-Alternating-Linear-Minimization" title="Permalink"></a></h2><p>The method <a href="../../reference/1_algorithms/#FrankWolfe.alternating_linear_minimization-Union{Tuple{LS}, Tuple{N}, Tuple{Any, Any, Any, Tuple{Vararg{FrankWolfe.LinearMinimizationOracle, N}}, Tuple{Vararg{Any, N}}}} where {N, LS&lt;:Union{Tuple{Vararg{FrankWolfe.LineSearchMethod, N}}, FrankWolfe.LineSearchMethod}}"><code>FrankWolfe.alternating_linear_minimization</code></a> is not a FrankWolfe method itself. It is a wrapper translating a problem over the intersection of multiple sets to a problem over the product space. ALM can be called with any FW method. The default choice though is <a href="../../reference/1_algorithms/#FrankWolfe.block_coordinate_frank_wolfe"><code>FrankWolfe.block_coordinate_frank_wolfe</code></a> as it allows to update the blocks separately. There are three different update orders implemented, <code>FullUpdate</code>, <code>CyclicUpdate</code> and <code>Stochasticupdate</code>. Accordingly both blocks are updated either simulatenously, sequentially or in random order.</p><pre><code class="language-julia hljs">for order in [FrankWolfe.FullUpdate(), FrankWolfe.CyclicUpdate(), FrankWolfe.StochasticUpdate()]

    _, _, _, _, _, alm_trajectory = FrankWolfe.alternating_linear_minimization(
        FrankWolfe.block_coordinate_frank_wolfe,
        f,
        grad!,
        lmos,
        x0,
        update_order=order,
        verbose=true,
        trajectory=true,
        epsilon=target_tolerance,
    )
    push!(trajectories, alm_trajectory)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">
Alternating Linear Minimization (ALM).
FW METHOD: block_coordinate_frank_wolfe
MEMORY_MODE: FrankWolfe.InplaceEmphasis() STEPSIZE: FrankWolfe.Adaptive{Float64, Int64, FrankWolfe.var&quot;#50#52&quot;} EPSILON: 1.0e-6 MAXITERATION: 10000
TYPE: Float64 GRADIENTTYPE: Float64
LAMBDA: 1.0
[ Info: In memory_mode memory iterates are written back into x0!

----------------------------------------------------------------------------------------------------------------
  Type     Iteration         Primal           Dual       Dual Gap           Time         It/sec          Dist2
----------------------------------------------------------------------------------------------------------------
     I             1   1.889232e+00  -2.011077e+01   2.200000e+01   0.000000e+00            Inf   1.889232e+00
    FW          1000   2.500023e-02   2.494268e-02   5.755263e-05   1.697560e+00   5.890807e+02   2.500023e-02
    FW          2000   2.500000e-02   2.499779e-02   2.211653e-06   1.708216e+00   1.170812e+03   2.500000e-02
  Last          2236   2.500000e-02   2.499900e-02   1.003006e-06   1.875562e+00   1.192176e+03   2.500000e-02
----------------------------------------------------------------------------------------------------------------

Alternating Linear Minimization (ALM).
FW METHOD: block_coordinate_frank_wolfe
MEMORY_MODE: FrankWolfe.InplaceEmphasis() STEPSIZE: FrankWolfe.Adaptive{Float64, Int64, FrankWolfe.var&quot;#50#52&quot;} EPSILON: 1.0e-6 MAXITERATION: 10000
TYPE: Float64 GRADIENTTYPE: Float64
LAMBDA: 1.0
[ Info: In memory_mode memory iterates are written back into x0!

----------------------------------------------------------------------------------------------------------------
  Type     Iteration         Primal           Dual       Dual Gap           Time         It/sec          Dist2
----------------------------------------------------------------------------------------------------------------
     I             1   1.889232e+00  -2.011077e+01   2.200000e+01   0.000000e+00            Inf   1.889232e+00
    FW          1000   2.500023e-02   2.494416e-02   5.606946e-05   2.719973e-01   3.676507e+03   2.500023e-02
    FW          2000   2.500000e-02   2.499785e-02   2.154004e-06   2.940082e-01   6.802532e+03   2.500000e-02
  Last          2237   2.500000e-02   2.499900e-02   9.981445e-07   2.995047e-01   7.468998e+03   2.500000e-02
----------------------------------------------------------------------------------------------------------------

Alternating Linear Minimization (ALM).
FW METHOD: block_coordinate_frank_wolfe
MEMORY_MODE: FrankWolfe.InplaceEmphasis() STEPSIZE: FrankWolfe.Adaptive{Float64, Int64, FrankWolfe.var&quot;#50#52&quot;} EPSILON: 1.0e-6 MAXITERATION: 10000
TYPE: Float64 GRADIENTTYPE: Float64
LAMBDA: 1.0
[ Info: In memory_mode memory iterates are written back into x0!

----------------------------------------------------------------------------------------------------------------
  Type     Iteration         Primal           Dual       Dual Gap           Time         It/sec          Dist2
----------------------------------------------------------------------------------------------------------------
     I             1   2.866179e-01  -2.171338e+01   2.200000e+01   0.000000e+00            Inf   2.866179e-01
    FW          1000   2.500018e-02   2.495033e-02   4.985431e-05   8.729067e-02   1.145598e+04   2.500018e-02
    FW          2000   2.500000e-02   2.499809e-02   1.906507e-06   1.103516e-01   1.812389e+04   2.500000e-02
  Last          2194   2.500000e-02   2.499900e-02   9.989094e-07   1.149877e-01   1.908030e+04   2.500000e-02
----------------------------------------------------------------------------------------------------------------</code></pre><p>As an alternative to Block-Coordiante Frank-Wolfe (BCFW), one can also run alternating linear minimization with standard Frank-Wolfe algorithm. These methods perform then the full (simulatenous) update at each iteration. In this example we also use <a href="../../reference/1_algorithms/#FrankWolfe.away_frank_wolfe-NTuple{4, Any}"><code>FrankWolfe.away_frank_wolfe</code></a>.</p><pre><code class="language-julia hljs">_, _, _, _, _, afw_trajectory = FrankWolfe.alternating_linear_minimization(
    FrankWolfe.away_frank_wolfe,
    f,
    grad!,
    lmos,
    x0,
    verbose=true,
    trajectory=true,
    epsilon=target_tolerance,
)
push!(trajectories, afw_trajectory);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">
Alternating Linear Minimization (ALM).
FW METHOD: away_frank_wolfe
MEMORY_MODE: FrankWolfe.InplaceEmphasis() STEPSIZE: FrankWolfe.Adaptive{Float64, Int64, FrankWolfe.var&quot;#50#52&quot;} EPSILON: 1.0e-6 MAXITERATION: 10000
TYPE: Float64 GRADIENTTYPE: Float64
LAMBDA: 1.0
[ Info: In memory_mode memory iterates are written back into x0!

-------------------------------------------------------------------------------------------------------------------------------
  Type     Iteration         Primal           Dual       Dual Gap           Time         It/sec          Dist2     #ActiveSet
-------------------------------------------------------------------------------------------------------------------------------
     I             1   1.150000e+01           -Inf            Inf   0.000000e+00            Inf   1.005291e+00              2
  Last           161   2.500000e-02   2.499904e-02   9.621137e-07   4.048680e-01   3.976604e+02   2.500000e-02             78
-------------------------------------------------------------------------------------------------------------------------------
    PP           161   2.500000e-02   2.499904e-02   9.621137e-07   4.876307e-01   3.301679e+02   2.500000e-02             78
-------------------------------------------------------------------------------------------------------------------------------</code></pre><h2 id="Running-Alternating-Projections"><a class="docs-heading-anchor" href="#Running-Alternating-Projections">Running Alternating Projections</a><a id="Running-Alternating-Projections-1"></a><a class="docs-heading-anchor-permalink" href="#Running-Alternating-Projections" title="Permalink"></a></h2><p>Unlike ALM, Alternating Projections (AP) is only suitable for feasibility problems. One omits the objective and gradient as parameters.</p><pre><code class="language-julia hljs">_, _, _, _, ap_trajectory = FrankWolfe.alternating_projections(
    lmos,
    x0,
    trajectory=true,
    verbose=true,
    print_iter=100,
    epsilon=target_tolerance,
)
push!(trajectories, ap_trajectory);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">
Alternating Projections.
MEMORY_MODE: FrankWolfe.InplaceEmphasis() EPSILON: 1.0e-6 MAXITERATION: 10000 TYPE: Float64
GRADIENTTYPE: FrankWolfe.BlockVector{Float64, Vector{Float64}, Tuple{Int64}}
[ Info: In memory_mode memory iterates are written back into x0!

----------------------------------------------------------------------------------
  Type     Iteration       Dual Gap          dist2           Time         It/sec
----------------------------------------------------------------------------------
     I             1   6.021733e-01   1.505433e-01   0.000000e+00            Inf
    FW           100   9.968329e-05   2.500020e-02   1.428484e+00   7.000428e+01
    FW           200   2.316528e-05   2.500001e-02   1.433456e+00   1.395229e+02
    FW           300   1.122389e-05   2.500000e-02   1.437672e+00   2.086707e+02
    FW           400   6.105757e-06   2.500000e-02   1.441453e+00   2.774979e+02
    FW           500   3.822934e-06   2.500000e-02   1.481789e+00   3.374299e+02
    FW           600   2.624313e-06   2.500000e-02   1.485633e+00   4.038683e+02
    FW           700   1.881535e-06   2.500000e-02   1.488916e+00   4.701407e+02
    FW           800   1.505897e-06   2.500000e-02   1.492008e+00   5.361900e+02
    FW           900   1.216129e-06   2.500000e-02   1.495082e+00   6.019737e+02
  Last           992   9.990101e-07   2.500000e-02   1.857969e+00   5.339163e+02
----------------------------------------------------------------------------------</code></pre><h2 id="Plotting-the-resulting-trajectories"><a class="docs-heading-anchor" href="#Plotting-the-resulting-trajectories">Plotting the resulting trajectories</a><a id="Plotting-the-resulting-trajectories-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-the-resulting-trajectories" title="Permalink"></a></h2><pre><code class="language-julia hljs">labels = [&quot;BCFW - Full&quot;, &quot;BCFW - Cyclic&quot;, &quot;BCFW - Stochastic&quot;, &quot;AFW&quot;, &quot;AP&quot;]

plot_trajectories(trajectories, labels, xscalelog=true)</code></pre><img src="4f252e1b.svg" alt="Example block output"/><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../docs_09_extra_vertex_storage/">« Extra-lazification</a><a class="docs-footer-nextpage" href="../docs_11_block_coordinate_fw/">Block-Coordinate Frank-Wolfe and Block-Vectors »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Monday 7 April 2025 08:45">Monday 7 April 2025</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
